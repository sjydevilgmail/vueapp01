"use strict";(self["webpackChunkvuexprj01"]=self["webpackChunkvuexprj01"]||[]).push([[592],{3592:function(s,e,t){t.r(e),t.d(e,{default:function(){return x}});var i=t(3396),r=t(9242),o=t(7139);const a={class:"col-md-3 mt-4"},n=(0,i._)("h1",{class:"text-center"},"Login",-1),d={class:"row"},l={class:"col-md-10 offset-md-1"},u=(0,i.Uk)(" User ID: "),p={class:"row"},m={class:"col-md-10 offset-md-1"},c=(0,i.Uk)(" PASSWORD: "),h=(0,i._)("div",{class:"col-md-10 offset-md-1 p-1"},[(0,i._)("button",{class:"btn btn-block btn-primary mt-3"},"Login")],-1),g={key:1,class:"alert alert-primary m-4"},f={class:"text-primary"};function w(s,e,t,w,U,v){return(0,i.wg)(),(0,i.iD)("div",a,[n,U.isLogin?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("h4",f,(0,o.zw)(U.user.uid)+"님 로그인 중...",1),(0,i._)("a",{href:"#",onClick:e[3]||(e[3]=(...s)=>v.logout&&v.logout(...s))},"로그아웃")])):((0,i.wg)(),(0,i.iD)("form",{key:0,name:"loginF",method:"POST",onSubmit:e[2]||(e[2]=(0,r.iM)(((...s)=>v.login&&v.login(...s)),["prevent"]))},[(0,i._)("div",d,[(0,i._)("div",l,[u,(0,i.wy)((0,i._)("input",{type:"text",name:"id","onUpdate:modelValue":e[0]||(e[0]=s=>U.tmpUser.uid=s),ref:"uid",placeholder:"User ID",class:"form-control"},null,512),[[r.nr,U.tmpUser.uid]])])]),(0,i._)("div",p,[(0,i._)("div",m,[c,(0,i.wy)((0,i._)("input",{type:"password",name:"pwd","onUpdate:modelValue":e[1]||(e[1]=s=>U.tmpUser.pwd=s),ref:"upwd",placeholder:"Password",class:"form-control"},null,512),[[r.nr,U.tmpUser.pwd]])])]),h],32))])}var U=t(6265),v=t.n(U),L={data(){return{tmpUser:{id:"",pwd:""},user:{uidx:"",uname:"",uid:""},isLogin:!1}},methods:{logout(){let s="http://localhost:5050/logout";v().get(s).then((s=>{200==s.status&&(sessionStorage.clear(),this.isLogin=!1)})).catch((s=>{alert("error: "+s.message),this.isLogin=!0}))},login(){return this.tmpUser.uid?this.tmpUser.pwd?void this.requestLogin():(alert("비밀번호를 입력하세요."),void this.$refs.upwd.focus()):(alert("id를 입력하세요."),void this.$refs.uid.focus())},requestLogin(){let s="http://localhosr:5050/login",e=new URLSearchParams;e.append("uid",this.tmpUser.uid),e.append("pwd",this.tmpUser.pwd),v().post(s,e).then((s=>{this.user=s.data.user,this.user.idx?(alert("로그인 성공"),sessionStorage.setItem("uname",this.user.name),sessionStorage.setItem("uidx",this.user.idx),sessionStorage.setItem("uid",this.user.uid),this.isLogin=!0):(alert("아이디와 비밀번호를 확인하세요."),this.isLogin=!1,this.tmpUser.uid="",this.tmpUser.pwd="",this.$refs.uid.focus()),this.isLogin=!0})).catch((s=>{alert("Error: "+s.message)}))}}},_=t(89);const k=(0,_.Z)(L,[["render",w]]);var x=k}}]);
//# sourceMappingURL=592.f3cfabdc.js.map